// OS-INPUT - Layout Specification Implementation
// Seguindo especificação detalhada para alinhamento com visão de produto

.os-input-container {
  display: flex;
  flex-direction: column;
  gap: var(--os-spacing-xs);
  width: 100%;

  &--small {
    gap: calc(var(--os-spacing-xs) * 0.5);
  }

  &--large {
    gap: var(--os-spacing-sm);
  }

  &--error {
    .mat-mdc-form-field {
      .mat-mdc-form-field-outline {
        color: var(--os-color-error-500);
      }

      .mat-mdc-form-field-focus-overlay {
        background-color: var(--os-color-error-50);
      }
    }
  }

  &--disabled {
    opacity: 0.6;
    pointer-events: none;
  }
}

.os-input__form-field {
  width: 100%;

  // Override Material Design styles to prevent conflicts
  .mat-mdc-form-field {
    font-family: var(--os-font-family-primary);

    // Remove default Material focus styles
    .mat-mdc-form-field-focus-overlay {
      opacity: 0 !important;
    }

    // Custom outline styles
    .mat-mdc-form-field-outline {
      color: var(--os-color-neutral-300);
      transition: color 200ms ease-in-out;
    }

    // Focus state
    &.mat-focused .mat-mdc-form-field-outline {
      color: var(--os-color-primary-500);
    }

    // Error state
    &.mat-form-field-invalid .mat-mdc-form-field-outline {
      color: var(--os-color-error-500);
    }

    // Input styles
    .mat-mdc-input-element {
      font-family: var(--os-font-family-primary);
      color: var(--os-color-text-primary);

      &::placeholder {
        color: var(--os-color-neutral-500);
        opacity: 1;
      }
    }

    // Label styles
    .mat-mdc-form-field-label {
      color: var(--os-color-text-secondary);
      font-family: var(--os-font-family-primary);
    }

    // Hint styles
    .mat-mdc-form-field-hint {
      color: var(--os-color-text-muted);
      font-family: var(--os-font-family-primary);
    }
  }

  &--small {
    .mat-mdc-form-field {
      font-size: var(--os-font-size-sm);

      .mat-mdc-input-element {
        font-size: var(--os-font-size-sm);
        padding: 8px 12px;
        min-height: 32px;
      }
    }
  }

  &--medium {
    .mat-mdc-form-field {
      font-size: var(--os-font-size-base);

      .mat-mdc-input-element {
        font-size: var(--os-font-size-base);
        padding: 12px 16px;
        min-height: 40px;
      }
    }
  }

  &--large {
    .mat-mdc-form-field {
      font-size: var(--os-font-size-lg);

      .mat-mdc-input-element {
        font-size: var(--os-font-size-lg);
        padding: 16px 20px;
        min-height: 48px;
      }
    }
  }

  &--error {
    .mat-mdc-form-field {
      .mat-mdc-form-field-outline {
        color: var(--os-color-error-500);
      }

      .mat-mdc-form-field-focus-overlay {
        background-color: var(--os-color-error-50);
        opacity: 0.1 !important;
      }
    }
  }

  &--disabled {
    .mat-mdc-form-field {
      opacity: 0.6;

      .mat-mdc-input-element {
        color: var(--os-color-neutral-500);
      }
    }
  }
}

// Removed .os-input styles as they conflict with Material Design Form Field
// All input styling is now handled through .os-input__form-field

// Icon styles are now handled by Material Design mat-icon
// Custom styling for icons within Material Form Field
.os-input__form-field {
  .mat-mdc-form-field-icon-prefix,
  .mat-mdc-form-field-icon-suffix {
    color: var(--os-color-neutral-500);
    transition: color 200ms ease-in-out;
  }

  // Hover state for icons
  &:hover .mat-mdc-form-field-icon-prefix,
  &:hover .mat-mdc-form-field-icon-suffix {
    color: var(--os-color-neutral-700);
  }

  // Focus state for icons
  &.mat-focused .mat-mdc-form-field-icon-prefix,
  &.mat-focused .mat-mdc-form-field-icon-suffix {
    color: var(--os-color-primary-500);
  }
}

// Clear button styles are now handled by Material Design mat-icon-button
// Custom styling for clear button within Material Form Field
.os-input__form-field {
  .mat-mdc-icon-button {
    color: var(--os-color-neutral-500);
    transition: all 200ms ease-in-out;
    min-width: 44px;
    min-height: 44px;

    &:hover {
      background-color: var(--os-color-neutral-100);
      color: var(--os-color-neutral-700);
    }

    &:focus {
      outline: 2px solid var(--os-color-primary-500);
      outline-offset: 2px;
    }

    &:active {
      transform: scale(0.95);
    }
  }
}

// Helper text styles are now handled by Material Design mat-hint
// Custom styling for helper text within Material Form Field
.os-input__form-field {
  .mat-mdc-form-field-hint {
    font-size: var(--os-font-size-sm);
    color: var(--os-color-neutral-600);
    line-height: 1.5;
    font-family: var(--os-font-family-primary);

    &.mat-mdc-form-field-hint-error {
      color: var(--os-color-error-500);
      font-weight: var(--os-font-weight-medium);
    }
  }
}

// Responsividade Mobile-First
@media (max-width: 575px) {
  .os-input__form-field {
    .mat-mdc-form-field {
      .mat-mdc-input-element {
        min-height: 44px;
        padding: 12px 16px;
      }
    }

    &--small .mat-mdc-form-field .mat-mdc-input-element {
      min-height: 44px;
      padding: 12px 16px;
    }

    &--medium .mat-mdc-form-field .mat-mdc-input-element {
      min-height: 44px;
      padding: 12px 16px;
    }

    &--large .mat-mdc-form-field .mat-mdc-input-element {
      min-height: 48px;
      padding: 14px 18px;
    }
  }

  .mat-mdc-icon-button {
    min-width: 44px;
    min-height: 44px;
  }
}

// Hover states are now handled by Material Design Form Field
// No additional hover styles needed for tablet and desktop

// Dark Mode Support
[data-theme='dark'] {
  .os-input__form-field {
    .mat-mdc-form-field {
      .mat-mdc-input-element {
        background-color: var(--os-color-surface);
        color: var(--os-color-on-surface);

        &::placeholder {
          color: var(--os-color-neutral-400);
        }
      }

      .mat-mdc-form-field-outline {
        color: var(--os-color-neutral-600);
      }

      &.mat-focused .mat-mdc-form-field-outline {
        color: var(--os-color-primary-400);
      }

      &.mat-form-field-invalid .mat-mdc-form-field-outline {
        color: var(--os-color-error-500);
      }

      .mat-mdc-form-field-label {
        color: var(--os-color-neutral-400);
      }

      .mat-mdc-form-field-hint {
        color: var(--os-color-neutral-400);

        &.mat-mdc-form-field-hint-error {
          color: var(--os-color-error-400);
        }
      }
    }

    .mat-mdc-form-field-icon-prefix,
    .mat-mdc-form-field-icon-suffix {
      color: var(--os-color-neutral-400);
    }

    .mat-mdc-icon-button {
      color: var(--os-color-neutral-400);

      &:hover {
        background-color: var(--os-color-neutral-700);
        color: var(--os-color-neutral-200);
      }
    }
  }
}

// High Contrast Mode Support
@media (prefers-contrast: high) {
  .os-input__form-field {
    .mat-mdc-form-field {
      .mat-mdc-form-field-outline {
        border-width: 2px;
      }

      &.mat-focused .mat-mdc-form-field-outline {
        border-width: 3px;
      }
    }

    .mat-mdc-icon-button {
      border: 1px solid currentColor;
    }
  }
}

// Reduced Motion Support
@media (prefers-reduced-motion: reduce) {
  .os-input__form-field {
    .mat-mdc-form-field,
    .mat-mdc-input-element,
    .mat-mdc-form-field-icon-prefix,
    .mat-mdc-form-field-icon-suffix,
    .mat-mdc-icon-button {
      transition: none;
    }

    .mat-mdc-icon-button:active {
      transform: none;
    }
  }
}
